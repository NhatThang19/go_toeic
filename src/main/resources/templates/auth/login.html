<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/auth-layout}">

<head>
    <title>Đăng nhập</title>
</head>

<body>

<div layout:fragment="content">

    <h2 class="text-2xl font-bold text-center mb-1 text-gray-800">Chào mừng trở lại!</h2>
    <p class="text-center text-gray-500 text-sm mb-6">Vui lòng nhập thông tin để tiếp tục học.</p>

    <div class="mb-2">
        <div th:if="${successMessage}" class="alert alert-success alert-sm shadow-sm">
            <i class="fa-solid fa-circle-check"></i> <span th:text="${successMessage}"></span>
        </div>

        <div th:if="${param.error}" class="alert alert-error alert-sm shadow-sm text-white">
            <i class="fa-solid fa-circle-exclamation"></i> <span>Email hoặc mật khẩu không chính xác.</span>
        </div>

        <div th:if="${param.unverified}" class="alert alert-warning alert-sm shadow-sm">
            <i class="fa-solid fa-triangle-exclamation"></i> <span>Tài khoản chưa được kích hoạt.</span>
        </div>

        <div th:if="${param.locked}" class="alert alert-error alert-sm shadow-sm text-white">
            <i class="fa-solid fa-lock"></i> <span>Tài khoản đã bị khóa. Liên hệ Admin.</span>
        </div>

        <div th:if="${param.logout}" class="alert alert-info alert-sm shadow-sm">
            <i class="fa-solid fa-right-from-bracket"></i> <span>Bạn đã đăng xuất thành công.</span>
        </div>
    </div>

    <form th:action="@{/dang-nhap}" method="POST">

        <fieldset class="fieldset w-full mb-4">
            <legend class="fieldset-legend font-bold text-gray-700">Email</legend>
            <label
                    class="input w-full bg-base-100 border-gray-300 focus-within:border-[#422AD5] focus-within:outline-none flex items-center gap-2">
                <i class="fa-regular fa-envelope text-gray-400"></i>
                <input type="email" name="email" class="grow" placeholder="example@email.com" required/>
            </label>
        </fieldset>

        <fieldset class="fieldset w-full mb-4">
            <legend class="fieldset-legend font-bold text-gray-700">Mật khẩu</legend>
            <label
                    class="input w-full bg-base-100 border-gray-300 focus-within:border-[#422AD5] focus-within:outline-none flex items-center gap-2">
                <i class="fa-solid fa-lock text-gray-400"></i>
                <input type="password" name="password" id="passwordInput" class="grow" placeholder="••••••••"
                       required/>
                <i id="togglePasswordIcon"
                   class="fa-regular fa-eye cursor-pointer text-gray-400 hover:text-[#422AD5] transition-colors"
                   onclick="togglePassword()"></i>
            </label>
        </fieldset>

        <div class="flex items-center justify-between mb-8">
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" name="remember-me" class="checkbox checkbox-sm checkbox-primary"/>
                <span class="text-sm text-gray-600 select-none">Ghi nhớ đăng nhập</span>
            </label>
            <a th:href="@{/quen-mat-khau}" class="text-sm font-semibold text-[#422AD5] hover:underline">Quên mật khẩu?</a>
        </div>

        <button type="submit"
                class="btn w-full border-none hover-brand text-lg font-medium shadow-md shadow-indigo-200">
            Đăng nhập
        </button>
    </form>

    <p class="text-center mt-6 text-sm text-gray-600">
        Chưa có tài khoản?
        <a th:href="@{/dang-ky}" class="font-semibold text-brand hover:underline">Đăng ký miễn phí</a>
    </p>
</div>

</body>

</html>