<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/auth-layout}">
<head>
    <title>Đặt lại mật khẩu - GoToeic</title>
</head>
<body>

<div layout:fragment="content">
    <h2 class="text-2xl font-bold text-center mb-1 text-gray-800">Đặt lại mật khẩu</h2>
    <p class="text-center text-gray-500 text-sm mb-6">
        Vui lòng nhập mật khẩu mới cho tài khoản của bạn.
    </p>

    <form th:action="@{/dat-lai-mat-khau}" th:object="${resetPasswordReq}" method="POST">

        <input type="hidden" th:field="*{token}"/>

        <fieldset class="fieldset w-full mb-3">
            <legend class="fieldset-legend font-medium text-gray-700">Mật khẩu mới</legend>
            <label class="input w-full bg-base-100 border-gray-300 focus-within:border-[#422AD5] focus-within:outline-none flex items-center gap-2"
                   th:classappend="${#fields.hasErrors('password')} ? 'input-error border-red-500' : ''">
                <i class="fa-solid fa-lock text-gray-400"></i>
                <input type="password" th:field="*{password}" id="newPassword" class="grow" placeholder="••••••••"/>
                <i class="fa-regular fa-eye cursor-pointer text-gray-400 hover:text-[#422AD5] transition-colors"
                   onclick="togglePassword('newPassword', this)"></i>
            </label>
            <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                 class="text-red-500 text-xs mt-1 text-left"></div>
            <span class="label text-xs text-gray-400 mt-1" th:unless="${#fields.hasErrors('password')}">Tối thiểu 6 ký tự</span>
        </fieldset>

        <fieldset class="fieldset w-full mb-6">
            <legend class="fieldset-legend font-medium text-gray-700">Nhập lại mật khẩu mới</legend>
            <label class="input w-full bg-base-100 border-gray-300 focus-within:border-[#422AD5] focus-within:outline-none flex items-center gap-2"
                   th:classappend="${#fields.hasErrors('confirmPassword')} ? 'input-error border-red-500' : ''">
                <i class="fa-solid fa-lock text-gray-400"></i>
                <input type="password" th:field="*{confirmPassword}" id="confirmPassword" class="grow"
                       placeholder="••••••••"/>
                <i class="fa-regular fa-eye cursor-pointer text-gray-400 hover:text-[#422AD5] transition-colors"
                   onclick="togglePassword('confirmPassword', this)"></i>
            </label>
            <div th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"
                 class="text-red-500 text-xs mt-1 text-left"></div>
        </fieldset>

        <button type="submit"
                class="btn w-full border-none hover-brand text-lg font-medium shadow-md shadow-indigo-200">
            Lưu mật khẩu
        </button>
    </form>

    <div class="pt-6 mt-4 text-center border-t border-gray-100">
        <a th:href="@{/dang-nhap}"
           class="inline-flex items-center justify-center gap-2 text-gray-500 hover:text-[#422AD5] transition-colors font-medium text-sm">
            <i class="fa-solid fa-arrow-left"></i> Quay lại đăng nhập
        </a>
    </div>

</div>

</body>
</html>